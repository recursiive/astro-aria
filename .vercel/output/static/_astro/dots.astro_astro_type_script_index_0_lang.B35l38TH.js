let a,c,w,y=[],I=0,A=0,f=[];const p=400,O=3,l=20,P=5,$=2,B=.7,N=2500,R=3e3,C=12;let d=window.innerWidth,u=window.innerHeight;function T(e,t,n){let i=0;return i+=Math.sin(e*.01+n*.1)*.5,i+=Math.sin(t*.01+n*.15)*.3,i+=Math.sin((e+t)*.005+n*.05)*.2,i*.5+.5}function U(e,t,n){return(T(e/p,t/p,n)-.5)*2*Math.PI*2}function S(){y=[];for(let e=-l/2;e<d+l;e+=l)for(let t=-l/2;t<u+l;t+=l)y.push({x:e,y:t,opacity:Math.random()*.5+.5,baseX:e,baseY:t})}function Y(){const e=Math.random()*d,t=Math.random()*u,n=["red","blue","purple","green","orange","yellow","cyan"],i=n[Math.floor(Math.random()*n.length)],h={centerX:e,centerY:t,color:i,startTime:Date.now(),dots:[]};for(let r=0;r<C;r++){const o=r/C*Math.PI*4,s=30+r*8,m=e+Math.cos(o)*s,g=t+Math.sin(o)*s;let M=null,E=1/0;for(const b of y){const v=Math.sqrt((b.baseX-m)**2+(b.baseY-g)**2);v<E&&(E=v,M=b)}M&&h.dots.push({dot:M,angle:o,radius:s,intensity:1})}f.push(h)}function _(){const e=Date.now();f=f.filter(t=>e-t.startTime<R),e-A>N&&(Y(),A=e)}function F(e){const t=Date.now();for(const n of f)for(const i of n.dots)if(i.dot===e){const r=(t-n.startTime)/R,o=Math.max(0,1-r),s=Math.sin(r*Math.PI*4)*.3+.7;return{red:`rgba(255, 100, 100, ${o*s})`,blue:`rgba(100, 150, 255, ${o*s})`,purple:`rgba(180, 100, 255, ${o*s})`,green:`rgba(100, 255, 150, ${o*s})`,orange:`rgba(255, 180, 100, ${o*s})`,yellow:`rgba(255, 255, 100, ${o*s})`,cyan:`rgba(100, 255, 255, ${o*s})`}[n.color]||`rgba(200, 200, 200, ${o*s})`}return null}function D(){const e=document.getElementById("dots-canvas");e&&(a=document.createElement("canvas"),a.width=d,a.height=u,a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.width="100%",a.style.height="100%",a.style.pointerEvents="none",e.appendChild(a),c=a.getContext("2d"),S(),x())}function x(){c.fillStyle="#000000",c.fillRect(0,0,d,u);const e=I/80*$;_();for(const t of y){const n=U(t.x,t.y,e),i=(T(t.x/p,t.y/p,e*2)+.5)*O,h=t.x+Math.cos(n)*i,r=t.y+Math.sin(n)*i,o=(T(t.x/200,t.y/200,e*.5)+.3)*.7,s=Math.abs(Math.cos(n))*.3+.2,m=Math.max(o,s)*t.opacity*B,g=F(t);g?c.fillStyle=g:c.fillStyle=`rgba(200, 200, 200, ${m})`,c.beginPath(),c.arc(h,r,1,0,Math.PI*2),c.fill()}I++,setTimeout(()=>{w=requestAnimationFrame(x)},1e3/P)}function L(){d=window.innerWidth,u=window.innerHeight,a&&(a.width=d,a.height=u,S(),f=[])}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",D):D();window.addEventListener("resize",L);window.addEventListener("beforeunload",()=>{window.removeEventListener("resize",L),w&&cancelAnimationFrame(w)});
