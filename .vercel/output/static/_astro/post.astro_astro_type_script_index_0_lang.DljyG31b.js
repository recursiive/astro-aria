async function c(){const e=window.location.pathname.split("/").pop();if(!e)return;const t=document.getElementById("view-number");if(t)try{const n=`viewed-${e}-session`,r=sessionStorage.getItem(n),i=await fetch(`/api/views/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(i.ok){const a=(await i.json()).views||0;if(t.textContent=a,!r)try{const o=await fetch(`/api/views/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({increment:!0})});if(o.ok){const s=await o.json();t.textContent=s.views,sessionStorage.setItem(n,"true"),console.log(`View tracked for "${e}": ${s.views} total views`)}}catch(o){console.log("Failed to increment view count:",o)}}else throw new Error("Failed to fetch view count")}catch(n){console.log("View tracking error:",n),t.textContent="1"}}typeof window<"u"&&document.addEventListener("DOMContentLoaded",c);
